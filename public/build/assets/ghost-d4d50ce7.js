$(function(){const v=e=>{let s=e;return[()=>s,l=>s=l]},[h,f]=v(""),[t,g]=v("");fetch("/fight/results").then(e=>e.json()).then(e=>{for(var s=1;s<=7;s++){for(var n=$("<tr>"),c=1;c<=200;c++)n.append('<td> <div id="tdBaccaratAllConsecutive-'+s+c+'"></div></td>');n.append("</tr>"),$("#tblBaccaratResultConsecutive").append(n)}for(var l=Object.values(e),r=1,d=1,i=1;i<l.length;i++){var a=document.getElementById("tdBaccaratAllConsecutive-"+r+d);if(!a)return;l[i-1][0]=="Meron Wins"?(a.classList.add("circleRedAll"),a.innerHTML=l[i-1][1]):l[i-1][0]=="Wala Wins"?(a.classList.add("circleBlueAll"),a.innerHTML=l[i-1][1]):l[i-1][0]=="Draw"?(a.classList.add("circleGreenAll"),a.innerHTML=l[i-1][1]):(l[i-1][0]=="Cancelled"||l[i-1][0]=="Pending")&&(a.classList.add("circleCancelAll"),a.innerHTML=l[i-1][1]),i==l.length-1&&g({y:r,c:d}),l[i-1][0]==l[i][0]?r==7?(r=1,d++):r=r+1:(r=1,d++)}u(l)});function u(e){e[e.length-2][0]=="Meron Wins"&&f("M"),e[e.length-2][0]=="Wala Wins"&&f("W"),e[e.length-2][0]=="Draw"&&f("D"),e[e.length-2][0]=="Cancelled"&&f("C")}window.Echo.private("fight").listen("Fight",async e=>{if(e.fight.prev){var n,c;h()==e.fight.prev.game_winner&&t().y!=7?(n=$(`#tdBaccaratAllConsecutive-${t().y+1}${t().c}`),c={y:t().y+1,c:t().c}):(n=$(`#tdBaccaratAllConsecutive-1${t().c+1}`),c={y:1,c:t().c+1}),n.html(e.fight.prev.fight_no),e.fight.prev.game_winner=="M"?n.addClass("circleRedAll"):e.fight.prev.game_winner=="W"?n.addClass("circleBlueAll"):e.fight.prev.game_winner=="D"?n.addClass("circleGreenAll"):n.addClass("circleCancelAll"),f(e.fight.prev.game_winner),g(c)}})});
