$(function(){const h=e=>{let s=e;return[()=>s,i=>s=i]},[g,d]=h(""),[t,f]=h("");$("#switch-video-display").is(":checked")?($("#header-closed").hide(),$("#poster-img").hide(),$("#mux-player").show(),$("#jeno-label").hide()):($("#event-name").hide(),$("#header-closed").show(),$("#poster-img").show(),$("#mux-player").hide(),$("#jeno-label").show()),$("#switch-video-display").on("change",async function(e){try{let s=!!$("#switch-video-display").is(":checked");await axios.post("/settings/video-display",{screen:s}),s?($("#header-closed").hide(),$("#poster-img").hide(),$("#mux-player").show(),$("#jeno-label").hide()):($("#header-closed").show(),$("#poster-img").show(),$("#mux-player").hide(),$("#jeno-label").show())}catch(s){console.log(s)}}),fetch("/fight/results").then(e=>e.json()).then(e=>{for(var s=1;s<=7;s++){for(var a=$("<tr>"),c=1;c<=200;c++)a.append('<td> <div id="tdBaccaratAllConsecutive-'+s+c+'"></div></td>');a.append("</tr>"),$("#tblBaccaratResultConsecutive").append(a)}for(var i=Object.values(e),r=1,o=1,l=1;l<i.length;l++){var n=document.getElementById("tdBaccaratAllConsecutive-"+r+o);if(!n)return;i[l-1][0]=="Meron Wins"?(n.classList.add("circleRedAll"),n.innerHTML=i[l-1][1]):i[l-1][0]=="Wala Wins"?(n.classList.add("circleBlueAll"),n.innerHTML=i[l-1][1]):i[l-1][0]=="Draw"?(n.classList.add("circleGreenAll"),n.innerHTML=i[l-1][1]):(i[l-1][0]=="Cancelled"||i[l-1][0]=="Pending")&&(n.classList.add("circleCancelAll"),n.innerHTML=i[l-1][1]),l==i.length-1&&f({y:r,c:o}),i[l-1][0]==i[l][0]?r==7?(r=1,o++):r=r+1:(r=1,o++)}v(i)});function v(e){e[e.length-2][0]=="Meron Wins"&&d("M"),e[e.length-2][0]=="Wala Wins"&&d("W"),e[e.length-2][0]=="Draw"&&d("D"),e[e.length-2][0]=="Cancelled"&&d("C")}window.Echo.channel("fight").listen(".fightUpdated",async e=>{if(e.fight.prev){var a,c;g()==e.fight.prev.game_winner&&t().y!=7?(a=$(`#tdBaccaratAllConsecutive-${t().y+1}${t().c}`),c={y:t().y+1,c:t().c}):(a=$(`#tdBaccaratAllConsecutive-1${t().c+1}`),c={y:1,c:t().c+1}),a.html(e.fight.prev.fight_no),e.fight.prev.game_winner=="M"?a.addClass("circleRedAll"):e.fight.prev.game_winner=="W"?a.addClass("circleBlueAll"):e.fight.prev.game_winner=="D"?a.addClass("circleGreenAll"):a.addClass("circleCancelAll"),d(e.fight.prev.game_winner),f(c)}})});
