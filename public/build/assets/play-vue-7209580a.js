import{_ as p,r as f,o as c,c as h,a as e,t as a,n as _,b,m as g,F as y,d as w,e as x,f as r,g as v}from"./_plugin-vue_export-helper-65a45c99.js";import{a as A}from"./axios-28bc18a3.js";import{d as M}from"./v-money3-f95dca5c.js";const C={components:{money3:M},data(){return{message:"_____",fightStatusClass:{OPEN:"gradient-status-open",CLOSED:"gradient-status-close",_____:"gradient-status-pending"},fight:[],fightNo:0,betAmount:0,daog:!1,amounts:[20,50,100,500,1e3,1500,"ALL-IN"],total:{meron:0,wala:0},payout:{meron:0,wala:0},percentage:{meron:184,wala:184},player:{points:0,id:"",bets:{meron:0,wala:0}},money:{decimal:".",thousands:",",precision:0,masked:!1,shouldRound:!1},ghost:{meron:0,wala:0,points:"UNLIMITED"},autobots:{meron:0,wala:0}}},mounted(){axios.defaults.headers={"Content-Type":"application/json",Accept:"application/json"},axios.get("/fight/current").then(t=>t.data).then(t=>{this.fight=t.current,this.message=this.setFightStatus(t.current),this.player.points=t.points,this.player.id=t.id,this.total=t.bets,this.player.bets=t.player}).then(()=>{window.Echo.private("user."+this.player.id).listen("Result",async t=>{t.bet.status=="X"?alert(`Returened ${this.formatMoney(t.bet.amount)} points!`):alert(`Congratulations! You win ${this.formatMoney(t.bet.win_amount)}`),this.player.points+=t.bet.win_amount,this.clear})}).then(()=>{setInterval(()=>{this.checkPoints().then(t=>{this.player.points=t.points})},1e4)}),Echo.channel("fight").listen(".fightUpdated",async t=>{t!=null&&(t.fight.curr?((t.fight.prev.game_winner=="D"||t.fight.prev.game_winner=="C")&&this.playerTotalBets>0&&(alert(`Returned ${this.formatMoney(this.playerTotalBets)} points!`),this.tada(),this.daog=!0,this.player.points+=this.playerTotalBets),t.fight.prev.game_winner=="M"&&this.meronWinAmount>0&&(alert(`Congratulations! MERON Wins ${this.formatMoney(this.meronWinAmount)}`),this.tada(),this.daog=!0,this.player.points+=this.meronWinAmount),t.fight.prev.game_winner=="W"&&this.walaWinAmount>0&&(alert(`Congratulations! WALA Wins ${this.formatMoney(this.walaWinAmount)}`),this.tada(),this.daog=!0,this.player.points+=this.walaWinAmount),this.daog=!1,this.fight=t.fight.curr,this.total.meron=this.total.wala=0,this.player.bets.meron=this.player.bets.wala=0):this.fight=t.fight,this.fight.status==null&&(this.ghost.meron=this.ghost.wala=0),this.message=this.setFightStatus(this.fight))}),window.Echo.private("bet").listen("Bet",async t=>{t.bet.side==="M"?this.total.meron=this.total.meron+t.bet.amount:this.total.wala=this.total.wala+t.bet.amount}),window.Echo.private("secured-bet").listen("SecuredBet",async t=>{if(!t.securedBet)return;const{total:o,side:l}=t.securedBet;l==="M"&&(this.total.meron=parseInt(o)),l==="W"&&(this.total.wala=parseInt(o))})},watch:{},computed:{totalSum(){return this.total.meron+this.total.wala},meronComm(){return this.total.meron*16/100},walaComm(){return this.total.wala*16/100},meronPercentage(){return(this.totalSum-this.meronComm)/this.total.meron*100},walaPercentage(){return(this.totalSum-this.walaComm)/this.total.wala*100},meronWinAmount(){return this.player.bets.meron*this.meronPercentage/100},walaWinAmount(){return this.player.bets.wala*this.walaPercentage/100},playerTotalBets(){return this.player.bets.meron+this.player.bets.wala},creditPoints(){return this.formatMoney(this.player.points)}},methods:{formatMoney(t){return isNaN(t)?"0.00":new Intl.NumberFormat("en-US").format(t.toFixed(2))},setFightStatus(t){if(this.fightNo=t.fight_no,t.status==null)return"_____";if(t.status=="O")return"OPEN";if(t.status=="C")return"CLOSED"},betManual(t){this.betAmount=t=="ALL-IN"?this.player.points:t},clear(){this.betAmount=0},topUp(){window.location.href="add-credits"},tada(){var t=new Audio("/music/tada.mp3");return t.play()},async checkPoints(){try{const{data:t}=await axios.get("/user/points");return t}catch(t){console.log(t.message)}},async addBet(t){try{if(this.message!=="OPEN"){alert("Cannot Bet");return}if(this.betAmount<10){alert("Minimum bet is 10.00");return}if(this.betAmount>this.player.points){alert("Insuficient Points");return}if(this.betAmount>1500){alert("Maximum bet is 1,500.00");return}if(!confirm(`Bet ${this.betAmount.toFixed(2)}?`))return;const{data:o}=await axios.post("/bet/add",{fight_no:this.fightNo,amount:this.betAmount,side:t});o.status=="OK"&&(this.player.points-=this.betAmount,t=="M"?this.player.bets.meron+=this.betAmount:this.player.bets.wala+=this.betAmount,this.clear())}catch(o){alert(o.response.data.error)}}}},P={class:"card bet-boxed-area mb-1"},B={class:"bet-bg-head items-center grid grid-cols-3"},E=e("b",{class:"text-lg"},"FIGHT # ",-1),N={id:"fight-no",class:"text-lg"},W={class:"text-center"},k={class:"nav-credits-wr w-25 w-sm-50 gold-text ml-auto"},S={href:"/deposit",class:"d-flex align-items-center justify-content-end gp-credits"},L=e("div",{class:"bg-success add-btn p-1"},[e("svg",{class:"svg-inline--fa fa-coins fa-w-16","data-prefix":"fas","data-icon":"coins",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[e("path",{fill:"currentColor",d:"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z"})])],-1),T={class:"credits-data d-flex"},O={class:"pr-2 gp-yellow-text font-weight-bold",id:"credit-pts"},I={class:"m-2"},R=x('<div class="grid grid-cols-2"><div class="border justify-center items-center flex bg-meroncolor"><h3 class="bet-button-red-full">MERON</h3></div><div class="border justify-center items-center flex bg-walacolor"><h3 class="bet-button-blue-full">WALA</h3></div></div>',1),U={class:"grid grid-cols-2 bg-os_bg"},V={class:"px-2 py-1 border border-black"},F={class:"font-extrabold text-center m-2 font-tally text-2xl"},z={class:"font-bold text-black text-center m-2 font-tally"},D={class:"flex justify-center items-center"},j={class:"font-bold text-drawcolor text-center text-sm"},Y={class:"text-player-bet"},G=r(" = "),H={class:"text-player-win"},K={class:"px-2 py-1 border border-black"},X={class:"font-extrabold text-center m-2 font-tally text-2xl"},q={class:"font-bold text-black text-center m-2 font-tally"},J={class:"flex justify-center items-center"},Q={class:"font-bold text-drawcolor text-center text-sm"},Z={class:"text-player-bet"},$=r(" = "),tt={class:"text-player-win"},et={class:"grid grid-cols-2 bg-os_bg"},st={class:"px-1 py-1"},ot=e("i",{class:"fa-solid fa-circle-plus text-sm mr-1"},null,-1),nt=r(" BET MERON "),at=[ot,nt],it={class:"px-1 py-1"},rt=e("i",{class:"fa-solid fa-circle-plus text-sm mr-1"},null,-1),lt=r(" BET WALA "),ct=[rt,lt],ht={class:"col-md-12"},dt={class:"input-group px-4 py-2"},mt={class:"input-group-append"},ut={class:"col-md-12"},pt={class:"amounts-bet-btn py-2 flex-wrap"},ft=["onClick"];function _t(t,o,l,yt,n,s){const m=f("money3");return c(),h("div",P,[e("div",B,[e("h6",null,[E,e("b",N,a(n.fightNo),1)]),e("div",W,[e("span",{class:_(["font-bold btn btn-block btn-sm btn-lg vue-components",n.fightStatusClass[n.message]])},a(n.message),3)]),e("div",k,[e("a",S,[L,e("div",T,[e("span",O,a(s.creditPoints),1)])])])]),e("div",I,[R,e("div",U,[e("div",V,[e("div",null,[e("h3",F,a(s.formatMoney(n.total.meron)),1),e("h3",z," PAYOUT = "+a(s.formatMoney(s.meronPercentage)),1),e("div",null,[e("div",D,[e("h3",j,[e("span",Y,a(s.formatMoney(n.player.bets.meron)),1),G,e("span",H,a(s.formatMoney(s.meronWinAmount)),1)])])])])]),e("div",K,[e("div",null,[e("h3",X,a(s.formatMoney(n.total.wala)),1),e("h3",q," PAYOUT = "+a(s.formatMoney(s.walaPercentage)),1),e("div",null,[e("div",J,[e("h3",Q,[e("span",Z,a(s.formatMoney(n.player.bets.wala)),1),$,e("span",tt,a(s.formatMoney(s.walaWinAmount)),1)])])])])])])]),e("div",et,[e("div",st,[e("button",{type:"button",color:"#00D7E7",onClick:o[0]||(o[0]=i=>s.addBet("M")),class:"button text-ellipsis overflow-clip uppercase bg-os_meron_btn text-sm font-bold is-info is-fullwidth"},at)]),e("div",it,[e("button",{type:"button",color:"#00D7E7",onClick:o[1]||(o[1]=i=>s.addBet("W")),class:"button text-ellipsis overflow-clip uppercase bg-os_wala_btn text-sm font-bold is-info is-fullwidth"},ct)])]),e("div",ht,[e("div",dt,[b(m,g({class:"form-control","model-modifiers":{number:!0},modelValue:n.betAmount,"onUpdate:modelValue":o[2]||(o[2]=i=>n.betAmount=i)},n.money),null,16,["modelValue"]),e("div",mt,[e("button",{onClick:o[3]||(o[3]=(...i)=>s.clear&&s.clear(...i)),class:"input-group-text"},"CLEAR")])])]),e("div",ut,[e("div",pt,[(c(!0),h(y,null,w(n.amounts,(i,u)=>(c(),h("button",{key:u,onClick:wt=>s.betManual(i),class:"btn btn-success btn-sm m-1"},a(i),9,ft))),128))])])])}const bt=p(C,[["render",_t]]),gt=A.create({baseURL:{}.VUE_APP_API_URL,withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}}),d=v(bt);d.config.globalProperties.axios=gt;d.mount("#betting-component");
